!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.activityDetector=t():e.activityDetector=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o="active",i="idle",r=o,u=["click","mousemove","keydown","DOMMouseScroll","mousewheel","mousedown","touchstart","touchmove","focus"],d=["blur"],c=["mousemove"],f=void 0,v=void 0;if("undefined"!=typeof document.hidden)f="hidden",v="visibilitychange";else for(var a=["webkit","moz","ms"],s=0;s<a.length;s++){var l=a[s];if("undefined"!=typeof document[l+"Hidden"]){f=l+"Hidden",v=l+"visibilitychange";break}}var m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.activityEvents,s=void 0===a?u:a,l=t.inactivityEvents,m=void 0===l?d:l,p=t.ignoredEventsWhenIdle,h=void 0===p?c:p,y=t.timeToIdle,E=void 0===y?3e4:y,b=t.initialState,w=void 0===b?r:b,x=t.autoInit,g=void 0===x||x,L=t.ignoreVisibilityChangeEvent,j=void 0!==L&&L,O=(e={},n(e,o,[]),n(e,i,[]),e),k=void 0,T=void 0,D=function e(t){clearTimeout(T),t===o&&(T=setTimeout(function(){return e(i)},E)),k!==t&&(k=t,O[k].forEach(function(e){return e()}))},I=function(e){(k===o||h.indexOf(e.type)<0)&&D(o)},M=function(){D(i)},H=function(){D(document[f]?i:o)},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;D(e===o?o:i),s.forEach(function(e){return window.addEventListener(e,I)}),m.forEach(function(e){return window.addEventListener(e,M)}),!j&&v&&document.addEventListener(v,H)},S=function(e,t){O[e].push(t);var n=function(){var n=O[e].indexOf(t);n>=0&&O[e].splice(n,1)};return n},_=function(){O[o]=[],O[i]=[],clearTimeout(T),s.forEach(function(e){return window.removeEventListener(e,I)}),m.forEach(function(e){return window.removeEventListener(e,M)}),!j&&v&&document.removeEventListener(v,H)};return g&&P(w),{on:S,stop:_,init:P}};t.default=m,e.exports=t.default}])});